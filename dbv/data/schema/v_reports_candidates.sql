CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_reports_candidates` AS select `u`.`name` AS `name`,(case when (`g`.`id` = '4') then convert(`f`.`email` using utf8) else `u`.`email` end) AS `email`,`u2g`.`group_id` AS `group_id`,`g`.`name` AS `group`,`u2g`.`group_id` AS `filter_type`,`uv`.`value` AS `filter_id` from ((((`aauth_user_to_group` `u2g` left join `aauth_users` `u` on((`u`.`id` = `u2g`.`user_id`))) left join `aauth_groups` `g` on((`u2g`.`group_id` = `g`.`id`))) left join `aauth_user_variables` `uv` on(((`u`.`id` = `uv`.`user_id`) and (`uv`.`key` = 'linked_entity_id')))) left join `facility` `f` on(((`uv`.`value` = `f`.`id`) and (`g`.`id` = '4')))) where ((`u`.`email` regexp '[-a-z0-9~!$%^&*_=+}{\\\'?]+(\\.[-a-z0-9~!$%^&*_=+}{\\\'?]+)*@([a-z0-9_][-a-z0-9_]*(\\.[-a-z0-9_]+)*\\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}))(:[0-9]{1,5})?') or (`f`.`email` regexp '[-a-z0-9~!$%^&*_=+}{\\\'?]+(\\.[-a-z0-9~!$%^&*_=+}{\\\'?]+)*@([a-z0-9_][-a-z0-9_]*(\\.[-a-z0-9_]+)*\\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}))(:[0-9]{1,5})?'))